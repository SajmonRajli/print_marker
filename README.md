# print_marker



После получения задачи не было времени ей заняться, выкроил лишь два вечера(ночи) 9 и 10 мая. 

Попытался разорабаться с hercules, понял примерно как он работает, но не придумал как мне его применять, только посмотреть какие команды доходят? А как с него отвечать автоматически?  Я представляю примерно как написать серверную часть на python, что б отвечать на команды клиента, а как это сделать в hercules не разобрался  (только вручную ответы кидал для тестов в окошко Sent data). Он меня больше всего и затормозил в самом начале. Может действительно небходимо было серверную часть написать?



Далее решил разобрать ТЗ, составил этапы решения. 

Этапы решения:
1. Создать базу данных для хранения информации о продуктах и кодах маркировки. Написать скрипт для загрузки кодов маркировки в БД.
2. Создать интерфейс пользователя, который будет показывать список продуктов и количество не напечатанных кодов маркировки для каждого продукта.
3. Реализовать функционал для отправки команд на принтер через TCP/IP и получения ответов от принтера.
4. Реализовать функционал для отслеживания состояния принтера и отображения прогресса печати.


C первым этапом вроде справился, база есть. Продукты,коды и их статус хранятся, функции для взаимодействия реализовал
Второй этап - ну такое, интерфейс сделал максимально примитивным, но конечно можно было его слепить более сложным. 
Третий этап - как смог реализовал, команды на принтер отправляются, ответы получаю. С ASCII тоже тестировал.
По четвертому этапу, запрос состояния есть, а вот прогресс печати не придумал как сделать.


Стек:
1. Python - для написания скриптов.
2. PostgreSQL - для хранения информации о продуктах и кодах маркировки.
3. Flask и JavaScript - для создания веб-интерфейса.


ЗАПУСК
Первым запускаем файл data_base.py, в результате создается база данных и две таблицы, плюс они заполняются данными 

далее запускаем flask_server.py или run.bat

переходим в браузере на страницу http://127.0.0.1:5000/main
На странице видим таблицу с продуктами,общее кол-во кодов и кол-во ожидающих печати
так же есть блок в котором можно запросить статус

Если запросить статус, надо прислать ответ, я кидал его как раз из hercules, он выводится на странице

Если нажать на любой продукт, начинается печать, в cmd можно по принтам смотреть, что нужно сделать
1. Запрашивается статус у принтера, надо ответить Ready или Printing
2. Отправляется код "на печать" и ждет ответа. нужно ответить done или error (любой другой ответ приравнивается к error)
Эти этапы повторяются пока не прогонятся все маркеры


Если в веб странице нажать "остановить печать" отправляется запрос на остановку в принтер (но со стороны питона это никак не реализовано, печать не остановится)

счетчик не реализовал, сообразить как его сделать не смог что-то


